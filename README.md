# Archive Monitoring - Telegram Bot для уведомлений о состоянии работы службы архивирования

На сервере настроены скрипты которые ежедневно создают архивы в локальной папке, а также с помощью RClone копируют их в папку в облаке.
Задача Archive Monitoring ежедневно мониторить работоспособность службы архивирования и синхронизации с облаком, и отправлять через Telegram Bot уведомления об ошибках.
Опыт эксплуатации систем резервного копирования показывает, что регулярно что-то ломается, а персонал не следит за этим, что приводит иногда с серьезным потерям.

вот пример работы бота: проверяется доступен ли по записи диск для локальных архивов, есть ли там свободное место, создавались ли архивы в течение нескольких дней.
также если установлен RClone: проверяется доступность облака, наличие свободного места, копировались ли туда свежие архивы, нет ли пропущенных архивов.

![](https://i.imgur.com/8y8gBxF.png)

бот работает по расписанию, а также обрабатывает запрос состояния вызванное через меню бота.

![](https://i.imgur.com/rHlpx6C.png)


# Для корректной работы нужно:
прогрумма работает только под Windows, это консольная утилита рассчитаная на запуск по расписанию.
1. Разместить программу мониторинга на том же сервере где хранятся локальные архивы
2. Добавить запуск программы по расписанию в службу Sheduler - один раз в день
3. Если хотите чтобы бот выдавал статус по запросу пользователя, тогда добавить запуск раз в 5-10 мин, с параметром командной строки "checkmenu"
4. Добавить путь к папке с RClone в переменную окружения PATH (требование библитеки rclone-python)
5. Настроить файл config.ini

# Настройки config.ini
BackupFolder = "D:\YandexDisk\Save" - локальная папка с архивами
RemoteFolder = "GoogleDrv:Save" - папка в облаке, запись в формате RClone
MinEmptySpaceInGB = 50 - минимальное место на локальном диске и в облаке
ReviewPeriodInDay = 10 - есть ли арзивы в течение хаданного периода
TelegramBotUsers = "MyName,0123456789" - нужно записать имя пользователя телеграм и его ИД
TelegramBot = "MyBotName" - имя бота в Телеграм
TelegramBotToken = "" - тут укажите данные токена от вашего бота

# Получение данных от Телеграм для настройки
1. создание и настройка Бота делается в корневом боте Телегам - https://t.me/BotFather
2. для получения ид пользователей, подключившихся к боту, запустите "tg_userlist.bat"
